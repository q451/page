<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>音乐节</title>
    <link rel="stylesheet" href="./bootstrap-5.1.3-dist/css/bootstrap.min.css">
    <script src="./bootstrap-5.1.3-dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="./js/template-web.js"></script>
</head>

<body>
    <div>
        <nav class="navbar navbar-dark bg-dark">
            <div class="nav-wrap">
              <div class="nav-primary">
                <a href="#">
                  <img src="./images/logo.png" width="142" alt="爬虫logo">
                </a>
              </div>
            </div>
            <ul class="nav">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="shouye.html">小游戏</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="tree.html">树洞先生</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">音乐节</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="game3.html">用户福利</a>
              </li>
                <!-- <li class="nav-item">
                    <a class="nav-link disabled">欢迎你的登录</a>
                </li> -->
            </ul>
              <div>
                <a class="navbar-brand" href="#">设置</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                        data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                        aria-expanded="false" aria-label="Toggle navigation">
                  <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                  <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                      <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="#">数据更新</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="#">个人中心</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="#">修改信息</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="#">修改密码</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="index.html">退出</a>
                      </li>
                  </ul>
                </div>
              </div>
        </nav>
        <div data-bs-spy="scroll" data-bs-target="#navbar-example2" data-bs-offset="0" class="scrollspy-example" tabindex="0">
 
          <div class="carousel ">
            <div class="carousel_img">
                <img class="centerImg" src="./images/music1.jpeg">
                <img class="rightImg" src="./images/music2.jpeg">
                <img class="leftImg" src="./images/music3.jpeg">
            </div>
            <ul class="carousel_dot">
                <li class="dotSty"></li>
                <li></li>
                <li></li>
            </ul>
          </div>
          <div class="picture"></div>
          <div class="music">
            <div class="row">
              <div class="col-md">
                <table class="table table-borderless text-center">
                  <tr>
                      <td colspan="2"><h3>Dream It Possible</h3></td>
                  </tr>
                  <tr>
                    <td colspan="2"><h6>—— Delacey - Dream It Possible</h6></td>
                  </tr>
                  <tr>
                    <td colspan="2">
                      <audio controls>
                        <source src="./music/Delacey - Dream It Possible.mp3" type="audio/mpeg">
                      </audio>
                    </td>
                  </tr>
                </table>
                <!-- <h2 style="text-align: center;">Dream It Possible</h2>
                <h5 style="text-align: center;">Delacey-Dream It Possible</h5> -->
                <!-- <div id="music_menu"></div>
                <script type="text/html" id="eachTemplate">
                    <table class="table table-borderless">
                      {{each musicinfo music}}
                      <tr>
                          <td colspan="2">{{music.admin}}</td>
                      </tr>
                      <tr>
                        <td colspan="2">{{music.musicname}}</td>
                      </tr>
                      <tr>
                        <td colspan="3">
                          <button type="button" class="btn btn-primary" style="border-radius: 10px">播放</button>
                        </td>
                      </tr>
                      {{/each}}               
                    </table>
                </script> -->
              </div>
            </div>
          </div>
        </div>
    </div>
</body>
<style>
  .music{
    position: absolute;
    top: 70%;
    left: 50%;
  }
  .picture{
    width: 250px;
    height: 250px;
    background-image: url(./images/photo.jpg);
    border-radius: 325px;
    position: absolute;
    top: 70%;
    left: 20%;
    animation: run 12s linear infinite;
  }
  @keyframes run{
    from{transform: rotate(0deg);}
    to{transform: rotate(360deg);}
  }
  /* 给轮播图盒子设置样式 */
  .carousel {
      margin: 50px auto;
      width: 40%;
      height: 20%;
      position: relative;
  }

  /* 给图片的盒子设置样式 */
  .carousel_img {
      width: 100%;
      height: 100%;
      position: relative;
  }
  /* 给图片设置样式 */
  .carousel_img img {
      max-width: 100%;
      position: absolute;
      left: 0;
      top: 0;
      border-radius: 15px;
      /* 设置圆角 */
      transition: 1s;
      /* 给图片设置过渡效果 */
      transform: scale(0.7);
      /* 给图片设置缩小百分之七十 */
      z-index: 500;
      /* 给图片设置层级 */
  }
  /* 给左中右三个图片分别设置样式
  这里因为类样式权重不够，所以加上了!important*/
  .leftImg {
      left: -300px !important;
  }

  .centerImg {
      transform: scale(1) !important;
      z-index: 900 !important;
      left: 0 !important;
  }

  .rightImg {
      left: 300px !important;
  }
  
</style>
<script>
  //网易云轮播图，position，z-index，transform组合实现轮播图
  const carousel = document.querySelector('.carousel') // 轮播图盒子
  const arrowsArr = document.querySelectorAll('.carousel_arrows img') // 箭头图片数组
  const dots = document.querySelectorAll('.carousel_dot li')  // 悬浮点元素数组
  const carouselArrows = document.querySelector('.carousel_arrows') // 左右箭头父元素
  const imageArr = document.querySelectorAll('.carousel_img img') // 轮播图片数组
  let timer   // 定时器
  let site = 0 // 图片实时位置  
  
  // 首先让图片自动轮播，设置一个定时器，每隔一段时间，修改左中右图片的class
  function setup() {
      timer = setInterval(() => {
          // 切换到下一张图片
          site++
          run(site)
      }, 2000);
  }

  function run(index) {
      // 纠正实时监控图片位置的stie
      if (index < 0) {
          // 当index小于0的时候,site应该为最后一张图片的索引
          site = dots.length - 1
          index = dots.length - 1
      }
      if (index === dots.length) {
          // 当index等于悬浮点数组长度时,stie应该为第一张图片的索引
          site = 0
          index = 0
      }
      // 切换悬浮点样式
      const dotSty = document.querySelector('.dotSty') // 找到当前有样式的悬浮点
      dotSty.className = ''   // 清除样式
      dots[index].className = 'dotSty' // 给下一个悬浮点添加样式

      // 改变图片样式,达到轮播效果
      // 获取当前有左中右样式的图片
      const leftImg = document.querySelector('.leftImg')
      const centerImg = document.querySelector('.centerImg')
      const rightImg = document.querySelector('.rightImg')
      // 清除样式
      leftImg.className = ''
      centerImg.className = ''
      rightImg.className = ''
      // 把左中右的样式给下一组图片
      // 把centerImg的样式赋给下一张图片，index为下一张图片索引
      imageArr[index].className = 'centerImg'
      // []里的三元运算符判断的是，当前显示的图片上一张图片的索引或者下一张图片的索引
      // 是否超过了最大值（图片数组长度减一）或者最小值（0）
      imageArr[index - 1 < 0 ? imageArr.length - 1 : index - 1].className = 'leftImg' 
      imageArr[index + 1 >= imageArr.length ? 0 : index + 1].className = 'rightImg'
      // 做到这里，就能自动切换轮播图了
      // 接下来我们添加一些互动效果，这才是js的魅力
  }

  // 给轮播图盒子添加鼠标移入和移除事件
  // 使得轮播图有暂停效果，和左右箭头有显示隐藏效果
  carousel.onmouseenter = () => {
      clearInterval(timer)
      carouselArrows.style.opacity = 0.7
  }
  carousel.onmouseleave = () => {
      setup()
      carouselArrows.style.opacity = 0
  }

  // 给箭头添加点击事件，左右切换轮播图
  for (let i = 0; i < arrowsArr.length; i++) {
      arrowsArr[i].onclick = () => {
          if (i === 0) {
              site--
              run(site)
          } else {
              site++
              run(site)
          }
      }
  }
  
  // 给悬浮点添加鼠标移入事件，切换图片，这里记得清除定时器
  for (let i = 0; i < dots.length; i++) {
      dots[i].onmouseenter = () => {
          clearInterval(timer)
          run(i)
          site = i
      }
  }
  // 切换到其他浏览器窗口时，停止轮播图，回来时继续轮播
  document.addEventListener('visibilitychange', () => {
      if (document.hidden) {
          clearInterval(timer)
      } else {
          setup()
      }
  })
  setup()

  var musicinfo = [{
      admin:'陈奕迅',
      musicname:'十年' ,
      musrc:'https://vkceyugu.cdn.bspapp.com/VKCEYUGU-7184a2f2-3b0b-407a-adc8-4d450f35c1e7/e1676efb-85aa-4fe0-b73b-74bbeadf88ae.mp3'
    },
    {
      admin:'周杰伦',
      musicname:'晴天' ,
      musrc:'https://vkceyugu.cdn.bspapp.com/VKCEYUGU-7184a2f2-3b0b-407a-adc8-4d450f35c1e7/a4f15326-a023-4e59-b92b-c0d91fea29cd.mp3'
    },
    {
      admin:'周杰伦',
      musicname:'告白气球' ,
      musrc:'https://vkceyugu.cdn.bspapp.com/VKCEYUGU-7184a2f2-3b0b-407a-adc8-4d450f35c1e7/b678f1e2-349d-4aed-9a2d-fceea624ee07.mp3'
    },
    {
      admin:'夏雨菲',
      musicname:'纸短情长' ,
      musrc:'https://vkceyugu.cdn.bspapp.com/VKCEYUGU-7184a2f2-3b0b-407a-adc8-4d450f35c1e7/d1912f22-08ff-47fa-a953-40d2c048e719.mp3'
    }
  ]
    // var result = template("eachTemplate",musicinfo);
    // var bookinfo = document.getElementById("music_menu");
    // bookinfo.innerHTML = result;
</script>
</html>
